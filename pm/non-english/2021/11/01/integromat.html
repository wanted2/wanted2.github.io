<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="https://gmpg.org/xfn/11" rel="profile" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />

  <!-- Enable responsiveness on mobile devices-->
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1"
  />

  <title>
     Integromat: An integration platform for workflow automation &middot; AiFi 
  </title>

  
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id="></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', '');
  </script>



  <!-- CSS -->
  <link rel="stylesheet" href="/assets/css/main.css" />
  

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface" />

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/favicon.png" />
<link rel="shortcut icon" href="/favicon.ico" />

  <!-- RSS -->
  <link
    rel="alternate"
    type="application/rss+xml"
    title="RSS"
    href="/feed.xml"
  />

  <!-- Additional head bits without overriding original head -->
  <style>
    div.chart {
      font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    }
    .line {
  fill: none;
  stroke: steelblue;
  stroke-width: 2px;
}

.grid line {
  stroke: lightgrey;
  stroke-opacity: 0.7;
  shape-rendering: crispEdges;
}

.grid path {
  stroke-width: 0;
}
  </style>
  <script src="https://d3js.org/d3.v4.js"></script>
  <script src="http://bl.ocks.org/mbostock/raw/4061502/0a200ddf998aa75dfdb1ff32e16b680a15e5cb01/box.js"></script>
</head>


  <body class="post">

    <div id="sidebar">
  <header>
    <div class="site-title">
      <a href="/">
        
          <span class="back-arrow icon"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
  <path d="M0 0h24v24H0z" fill="none"/>
  <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
</svg></span>
        
        AiFi
      </a>
    </div>
    <p class="lead">The official AiFi</p>
  </header>
  <nav id="sidebar-nav-links">
  
    <a class="home-link "
        href="/">Home</a>
  
  

  

  


  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  

  
    
  

  
    
  

  
    
      <a class="page-link "
          href="/projects.html">Projects and Demos</a>
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  


  


  
    
  

  
    
  

  
    
      <a class="category-link "
          href="/category/ai.html">Artificial Intelligence</a>
    
  

  
    
      <a class="category-link "
          href="/category/cv.html">Computer Vision</a>
    
  

  
    
  

  

  
    
      <a class="category-link "
          href="/category/non-english.html">Tiếng Việt, 日本語</a>
    
  

  
    
      <a class="category-link "
          href="/category/pm.html">Project Management</a>
    
  

  
    
  

  
    
      <a class="category-link "
          href="/category/se.html">Software Engineering</a>
    
  

  
    
  

  
    
      <a class="category-link "
          href="/category/sre.html">Site Reliability Engineering</a>
    
  

  
    
  

  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  


  <!-- Optional additional links to insert in sidebar nav -->
</nav>

  <a href="/about.html">About</a>

  

  <nav id="sidebar-icon-links">
  

  <a id="subscribe-link"
     class="icon" title="Subscribe" aria-label="Subscribe"
     href="/feed.xml">
    <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <circle cx="6.18" cy="17.82" r="2.18"/>
    <path d="M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"/>
</svg>
  </a>

  
  
  
  

  
    <a id="tags-link"
       class="icon"
       title="Tags" aria-label="Tags"
       href="/tags.html">
      <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z"/>
</svg>
    </a>
  

  
    <a id="search-link"
       class="icon"
       title="Search" aria-label="Search"
       href="/search.html">
      <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>
    </a>
  

  <!-- Optional additional links to insert for icons links -->
</nav>

  <p>
  &copy; 2021.
  <a href="/LICENSE.md">MIT License.</a>
</p>

</div>

    <main class="container">
      <header>
  <h1 class="post-title">Integromat: An integration platform for workflow automation</h1>
</header>
<div class="content">
  <div class="post-meta">
  <span class="post-date">01 Nov 2021</span>
  <span class="post-categories">
    
      &bull;

      
      
      

      
        <a href="/category/pm.html">
          Project Management
        </a>
      
    
      &bull;

      
      
      

      
        <a href="/category/non-english.html">
          Tiếng Việt, 日本語
        </a>
      
    
  </span>
  <span class="share-page">
    &bull;
    <a href="https://linkedin.com/shareArticle?url=https://wanted2.github.io/pm/non-english/2021/11/01/integromat.html" target="_blank"><i class="fa fa-linkedin"></i></a>
    <a href="https://twitter.com/intent/tweet?text=Integromat: An integration platform for workflow automation&url=https://wanted2.github.io/pm/non-english/2021/11/01/integromat.html&via=&related=" rel="nofollow" target="_blank" title="Share on Twitter"><i class="fab fa-twitter"></i></a>
    <a href="https://facebook.com/sharer.php?u=https://wanted2.github.io/pm/non-english/2021/11/01/integromat.html" rel="nofollow" target="_blank" title="Share on Facebook"><i class="fa fa-facebook-square"></i></a>
</span>

<span title="Estimated read time">
  
  
    13 mins
  
</span>

</div>

  <div id="table-of-contents">
  <h2>Index</h2>
    <ol id="toc" class="section-nav">
<li class="toc-entry toc-h1"><a href="#đề-xuất-của-nhân-viên-em-xin-làm-2-tuần-ạ">Đề xuất của nhân viên: Em xin làm 2 tuần ạ!</a></li>
<li class="toc-entry toc-h1"><a href="#đánh-giá-thực-ra-bọn-anh-làm-tầm-5-10-phút-là-xong-em-ạ-">Đánh giá: Thực ra bọn anh làm tầm 5-10 phút là xong em ạ …</a></li>
<li class="toc-entry toc-h1"><a href="#cấu-hình-integromat">Cấu hình integromat</a>
<ol>
<li class="toc-entry toc-h2"><a href="#đăng-ký-tài-khoản">Đăng ký tài khoản</a></li>
<li class="toc-entry toc-h2"><a href="#thiết-kế-hệ-thống">Thiết kế hệ thống</a></li>
<li class="toc-entry toc-h2"><a href="#cấu-hình-các-modules">Cấu hình các modules</a>
<ol>
<li class="toc-entry toc-h3"><a href="#triggers">Triggers</a></li>
<li class="toc-entry toc-h3"><a href="#xml-to-csv">XML to CSV</a></li>
<li class="toc-entry toc-h3"><a href="#upload-to-onedrive">Upload to OneDrive</a></li>
<li class="toc-entry toc-h3"><a href="#routing">Routing</a></li>
<li class="toc-entry toc-h3"><a href="#post-news-to-chat-room">Post news to Chat room</a></li>
<li class="toc-entry toc-h3"><a href="#error-handling">Error handling</a></li>
<li class="toc-entry toc-h3"><a href="#filters">Filters</a></li>
</ol>
</li>
<li class="toc-entry toc-h2"><a href="#test">Test</a></li>
<li class="toc-entry toc-h2"><a href="#vận-hành">Vận hành</a></li>
</ol>
</li>
<li class="toc-entry toc-h1"><a href="#kết-luận">Kết luận</a></li>
</ol>
  </div>

  <div class="post-body">
    <p><img src="/assets/img/integromat01.png" alt="integromat" /></p>

<p>Cách đây gần chục năm, có 1 câu chuyện tôi từng chứng kiến như sau: có 1 anh sếp bạn tôi giao nhiệm vụ cho nhân viên mới vào làm.
Cậu nhân viên cũng mới vào ngành, nên nhiệm vụ cũng kiểu như các bài tập nhỏ để dần dần nắm bắt.
Hôm ấy, có giao cho 1 nhiệm vụ như thế này:</p>

<blockquote>
  <p><strong>Sếp (S)</strong>: Anh giao cho em một nhiệm vụ là thu thập dữ liệu từ nguồn cấp RSS (hiện tại có vài nghìn nguồn mở, bọn anh sẽ lên danh sách sau). Nhưng giờ anh có 1 nguồn là <a href="https://vnexpress.net/rss/so-hoa.rss">https://vnexpress.net/rss/so-hoa.rss</a> mà bọn anh muốn thực hiện 1 workflow như sau:</p>
  <ul class="task-list">
    <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Đầu tiên lấy dữ liệu từ <a href="https://vnexpress.net/rss/so-hoa.rss">https://vnexpress.net/rss/so-hoa.rss</a> và parse thành 1 list các bài báo.
      <ul class="task-list">
        <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />yêu cầu ở đây là filter chỉ lấy ra những bài báo nào mà phần giới thiệu có nói về <code class="language-plaintext highlighter-rouge">AI</code>.</li>
        <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Sau đó convert list của em lấy về thành CSV với tất cả các trường có thể lấy được.</li>
        <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Upload file CSV lên OneDrive của team.</li>
      </ul>
    </li>
    <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Song song với luồng CSV là luồng post bài đăng lên room chat của team trên Gitter.im</li>
  </ul>
</blockquote>

<blockquote>
  <p><strong>S</strong>: <strong>Em lên stack công nghệ và estimate làm trong bao lâu hộ anh trước được không?</strong></p>
</blockquote>

<!--more-->

<h1 id="đề-xuất-của-nhân-viên-em-xin-làm-2-tuần-ạ">Đề xuất của nhân viên: Em xin làm 2 tuần ạ!</h1>

<p>Bài toán này thực ra không có gì mới mẻ cả, mà là một dạng task mà trong đó có các thành phần của xây dựng một data warehouse cơ bản: luồng ETL cơ bản, lưu trữ dữ liệu dạng bảng (mà thực ra bảng cũng như SQL, về sau có thể thay thế bằng CSDL dạng quan hệ), rồi luồng thông báo cảnh báo lên chat hoặc SNS.
Vì hai luồng CSV và hook vào Gitter.im là song song nên có thể dính thêm tối ưu hóa đa nhiệm đa luồng.
Nói chung là 1 bài tập vừa sức và không quá hóc búa, một bài tập cơ bản cho kỹ sư data mới vào nghề.</p>

<p>Trên đây là bản chất của bài toán, còn mục tiêu của đưa bài tập này với kỹ sư data lâu năm như anh bạn tôi thì là muốn xem mindset làm việc của nhân viên để còn bồi dưỡng dần dần.</p>

<p>Dưới đây là bản đề xuất của cậu nhân viên:</p>

<blockquote>
  <p><strong>Nhân viên K</strong>: Em xin đề xuất làm việc như sau ạ:</p>
</blockquote>

<blockquote>
  <ul>
    <li>Với luồng CSV như anh giao, em sẽ dùng stack là <code class="language-plaintext highlighter-rouge">Python</code> để lấy nguồn cấp RSS, dùng các thư viện như sau: <code class="language-plaintext highlighter-rouge">xml</code> để parse RSS tree, và <code class="language-plaintext highlighter-rouge">pandas</code> để tạo nội dung CSV, sau đó em dùng <a href="https://docs.microsoft.com/en-us/onedrive/developer/rest-api/getting-started/?view=odsp-graph-online">API</a> của M$ để upload file lên OneDrive. Luồng này em estimate mất 7 ngày (4 ngày tạo file CSV và 3 ngày để upload lên OneDrive).</li>
    <li>Với luồng post bài lên chat thì em phải đọc hiểu <a href="https://developer.gitter.im/docs/welcome">tài liệu</a> của API của Gitter để post bài lên room, mất tầm 3 ngày nữa ạ.</li>
    <li>Về kiến trúc để song song hóa hai luồng, em dùng <code class="language-plaintext highlighter-rouge">multiprocessing</code> và <code class="language-plaintext highlighter-rouge">threading</code> ạ.</li>
  </ul>
</blockquote>

<p>Nhìn chung làm thế nào thì cũng được thôi.
<strong>Kết quả</strong> mà ok thì cũng không vấn đề gì nếu quá trình có sai sót.
Có vấn đề sai sót ở quá trình thì cứ fix rồi commit lên mà đảm bảo kết quả cuối cùng ok thì không sao.
Tuy vậy kết quả kỳ vọng ở đây là gì?
CÓ 3 mặt:</p>

<ul>
  <li><em>tốc độ làm việc</em>: phải nhanh, 2 tuần là đề xuất của K.</li>
  <li>sản phẩm có tính <em>khả dụng</em> cao:
    <ul>
      <li><em>ít bugs ở sản phẩm đầu ra</em>, còn các sản phẩm trung gian, các quá trình thì chả ai quan tâm. Code cũng được mà no-code, low-code cũng được.</li>
      <li><em>triển khai và vận hành được luôn và ít sự cố</em>.</li>
    </ul>
  </li>
</ul>

<p>Danh sách chi tiết liệt kê ra thì còn dài nhưng mà tạm thời với bài tập về nhà kiểu này thì tôi nghĩ anh bạn tôi có tiêu chí đánh giá thế là ổn thỏa rồi.</p>

<p>Nhìn chung, tôi và anh bạn tôi cũng không phải kiểu dò xét từng chi tiết khiến nhân viên cảm thấy <code class="language-plaintext highlighter-rouge">bị soi</code> khi làm việc, nên những chi tiết thì cứ giao các em làm, nhưng quản lý output và chất lượng.
Tuy nhiên, là bản đề xuất này coi như 1 output trung gian thì quả thực là hơi khiến anh em <code class="language-plaintext highlighter-rouge">lăn tăn</code>.</p>

<ul>
  <li>Thứ nhất, là estimate 10 man-days tức là 2 man-weeks, 2 tuần làm việc.</li>
  <li>Thứ hai là cách làm có vẻ hơi đòi hỏi anh em quản lý phải monitor và theo dõi từng khâu trong quy trình để đảm bảo ít bugs. Như vậy là tăng tải cho anh em quản lý.</li>
  <li>Thứ ba là khâu triển khai và vận hành hầu như ko có ý kiến gì trong đề xuất.</li>
</ul>

<blockquote>
  <p>Với người mới thì cũng cứ tạm cho làm rồi anh em mình uốn nắn dần Tuấn ạ.</p>
</blockquote>

<p>Đây là lời tâm huyết của anh bạn tôi lúc bắt đầu cho cậu nhân viên K làm việc này.
Tôi lúc đó cũng không biết nói thế nào nên cứ để nó chạy thử xem.</p>

<h1 id="đánh-giá-thực-ra-bọn-anh-làm-tầm-5-10-phút-là-xong-em-ạ-">Đánh giá: Thực ra bọn anh làm tầm 5-10 phút là xong em ạ …</h1>

<p>Nhưng bây giờ nghĩ lại, tôi thấy đáng ra nên đánh chặn ngay từ đầu!
Làm quản lý chả ai muốn <code class="language-plaintext highlighter-rouge">soi</code> nhân viên cả, nhưng đề xuất làm như K là anh em phải chuẩn hóa quy trình, lên kế hoạch theo dõi, lên cảnh báo, …
trăm thứ bà rằn mà nói chung là <code class="language-plaintext highlighter-rouge">tăng tải</code> cho quản lý.</p>

<blockquote>
  <p>Kết cục là không chỉ 2 tuần mà quá trình “uốn nắn” kéo dài 6 tháng luôn mà lúc triển khai và vận hành cũng vẫn không yên tâm về sự cố bất thình lình.</p>
</blockquote>

<p>Tại sao không nên đánh chặn ngay thì vì lý do giáo dục để hướng dẫn nhân viên cho lên dần dần.
Mình mà đánh chặn đôi khi lại gặp câu nói bất hủ:</p>

<blockquote>
  <p>Thế các anh làm đi?</p>
</blockquote>

<p>Ừ thì các anh làm thì chỉ mất tầm 5-10 phút thôi em ạ!
Và bọn anh lấy ví dụ mẫu là nền tảng tích hợp dịch vụ <a href="https://www.integromat.com/en">integromat.com</a> cho nó nhanh nhé.</p>

<h1 id="cấu-hình-integromat">Cấu hình integromat</h1>

<h2 id="đăng-ký-tài-khoản">Đăng ký tài khoản</h2>

<p>Đầu tiên là cũng nên có điều tra về nền tảng integration xem có gói nào phù hợp nhất.
Tuy nhiên, theo tôi tìm hiểu thì mảng tích hợp này cũng khá bão hòa và nhiều nền tảng rồi.
Tính năng cũng same same nhau.
Thôi thì tạm chọn integromat nhé.</p>

<p>Thì integromat cũng offer nhiều gói: <a href="https://www.integromat.com/en/pricing">https://www.integromat.com/en/pricing</a>.
Gói Free để demo thử thì bạn sẽ chỉ tạo được tối đa 2 scenarios.
Scenario timeout chỉ được 5 phút, minimum interval giữa hai lần chạy của scenario chỉ tối thiểu 15 phút.
Webhook queue size (số lượng webhook được lên queue thực hiện) cũng nhỏ hơn, storage ngoài cũng chỉ được 1MB.</p>

<p>Thì quay lại đầu bài thì thực ra cũng chỉ cần update ở tầm 60 phút một lần.
Các chỉ số khác là đủ cho bản demo, và quan trọng hơn là triển khai vận hành cũng đủ để dùng trong thực tế.</p>

<p>Ngoài ra gói có phí cơ bản cũng chỉ 9$/tháng.</p>

<p>Đầu tiên vào trang <a href="https://www.integromat.com/en/register">Sign up</a> dịch vụ, điền thông tin và đăng ký free thôi.
Integormat sẽ gửi link verify vào email đăng ký, và bạn phải click vào link trong email đăng ký ấy để kích hoạt tài khoản.</p>

<p>Nhìn chung quá trình này mất 1-2 phút.</p>

<p>Khi bắt đầu thì sẽ có một nút bấm trong trang MyPage để guide bạn onboarding nhanh chóng:</p>

<p><img src="/assets/img/integromat02.png" alt="integromat" /></p>
<h2 id="thiết-kế-hệ-thống">Thiết kế hệ thống</h2>

<p>Bạn sẽ cần 1 trigger để theo dõi nguồn cấp RSS, một module để chuyển XML sang CSV, và một module để upload lên OneDrive.
Song song với đó, bạn cần 1 module để tích hợp với Gitter.im.
Bạn không nên quên <strong>xử lý lỗi</strong> vì mọi module đều có thể có lỗi khi fetch data.</p>

<h2 id="cấu-hình-các-modules">Cấu hình các modules</h2>
<h3 id="triggers">Triggers</h3>

<p>Đầu tiên bạn cần ấn nút <code class="language-plaintext highlighter-rouge">Creat a scenario</code> để tạo ra một kịch bản thực thi cho nhiệm vụ.
Mọi xử lý sẽ bắt đầu từ 1 <strong>trigger</strong> mà bạn sẽ dùng RSS để bắt đầu.</p>

<p><img src="/assets/img/integromat03.png" alt="integromat" /></p>

<p>Hãy chọn <strong>Watch RSS feed items</strong>.
Trong cửa sổ tiếp theo hãy chọn <code class="language-plaintext highlighter-rouge">Show advanced settings</code>, nhập nguồn RSS và click OK.</p>

<p><img src="/assets/img/integromat04.png" alt="integromat" /></p>

<p>Trong cửa sổ <code class="language-plaintext highlighter-rouge">Choose where to start</code> thì cứ chọn <code class="language-plaintext highlighter-rouge">From now on</code> cũng ok.
Thế là bạn đã có 1 trigger mà cứ mỗi khi có thay đổi trên nguồn cấp đã cho (tần suất kiểm tra sẽ cấu hình sau), thì lập tức trigger sẽ chạy luồng mà bạn sẽ cấu hình tiếp theo.</p>

<h3 id="xml-to-csv">XML to CSV</h3>

<p>Nhấn vào nút <strong>Add a module</strong> như hình dưới:</p>

<p><img src="/assets/img/integromat05.png" alt="integromat" /></p>

<p>Sau đó chọn module <code class="language-plaintext highlighter-rouge">CSV</code> từ danh sách:</p>

<p><img src="/assets/img/integromat06.png" alt="integromat" /></p>

<p>Sau đó bạn có thể nhập chọn những trường sẽ lấy từ nguồn RSS để tạo ra file CSV:</p>

<p><img src="/assets/img/integromat07.png" alt="integromat" /></p>

<p>Bạn có thể chọn GROUP BY bằng trường tùy thích.
Trên đây tôi chọn theo <code class="language-plaintext highlighter-rouge">updated_at</code>.</p>

<h3 id="upload-to-onedrive">Upload to OneDrive</h3>

<p>Để upload CSV lên OneDrive, bạn cần add thêm module OneDrive:</p>

<p><img src="/assets/img/integormat08.png" alt="integromat" /></p>

<p>Hãy chọn <code class="language-plaintext highlighter-rouge">Upload file</code> ở cửa sổ chọn chức năng:</p>

<p><img src="/assets/img/integromat09.png" alt="integromat" /></p>

<p>Sau đó chọn <code class="language-plaintext highlighter-rouge">Add</code> để authenticate vào OneDrive:</p>

<p><img src="/assets/img/integromat10.png" alt="integromat" /></p>

<p>Sau đó một pop-up sẽ mở ra để bạn xác nhận quyền truy cập của ứng dụng integromat vào OneDrive.
Khi xong bước này bạn sẽ quay lại thiết lập <code class="language-plaintext highlighter-rouge">Folder</code> thành <code class="language-plaintext highlighter-rouge">/</code>, tên file thành <code class="language-plaintext highlighter-rouge">.xml</code> và dữ liệu là <code class="language-plaintext highlighter-rouge">text</code>.</p>

<p><img src="/assets/img/integromat11.png" alt="integromat" /></p>

<p>Để tránh lỗi bạn nên chọn <code class="language-plaintext highlighter-rouge">Rename existing files</code>.</p>

<h3 id="routing">Routing</h3>

<p>Vậy là bạn đã xong luồng thứ nhất mà chưa mất đến 5 phút đâu.
Trước khi add luồng thứ 2, chúng ta cần có 1 module để song song hóa, kiểu như <strong>Router</strong>.</p>

<p><img src="/assets/img/integromat12.png" alt="integromat" /></p>

<p>Sau khi thêm router thì thiết kế của bạn sẽ như sau:</p>

<p><img src="/assets/img/integromat13.png" alt="integromat" /></p>
<h3 id="post-news-to-chat-room">Post news to Chat room</h3>

<p>Từ Router hãy tạo thêm 1 luồng mới và tìm module Gitter:</p>

<p><img src="/assets/img/integromat14.png" alt="integromat" /></p>

<p>Hãy chọn <code class="language-plaintext highlighter-rouge">Send a mesage to a room</code>:</p>

<p><img src="/assets/img/integromat15.png" alt="integromat" /></p>

<p>Bạn sẽ phải đăng nhập và cấp quyền truy cập cho integromat vào Gitter.im.
Một cửa sổ popup sẽ mửo ra sau khi bạn nhấn <code class="language-plaintext highlighter-rouge">Add</code>.
<img src="/assets/img/integromat16.png" alt="integromat" /></p>

<p>Chú ý là Gitter chỉ chấp nhận đăng nhập qua Gitlab, Github và Twitter.
Đây là kênh chat dành riêng cho developer.
Tôi chọn twitter thôi.</p>

<p>Sau khi cấp quyền thành công, bạn sẽ quay lại integromat, và cấu hình tin nhắn sẽ lên Gitter.
Bạn có thể dùng định dạng mẫu markdown để post bài.</p>

<p><img src="/assets/img/integromat17.png" alt="integromat" /></p>

<p>Vậy đấy luồng số 2 đã xong trong chưa đầy 1 phút.</p>

<h3 id="error-handling">Error handling</h3>

<p><img src="/assets/img/integromat18.png" style="width:50%; margin: 10px; float: right;" /></p>

<p>Xử lý lỗi luôn là một phần quan trọng của lập trình phần mềm.
Lỗi luôn xảy ra và cách handle lỗi rất quan trọng.
Bạn click chuột phải vào module cần xử lý lỗi và chọn <code class="language-plaintext highlighter-rouge">Add error handlers</code>.
Đó là tất cả việc bạn sẽ cần làm để bắt đầu xử lý lỗi trên integromat.
<strong>Tiện quá đúng không?</strong></p>

<p><img src="/assets/img/integromat19.png" style="width:50%; margin: 10px; float: left;" /></p>

<p><strong>Vậy nội dung hàm xử lý lỗi sẽ như thế nào?</strong>
Bạn có thể dùng <code class="language-plaintext highlighter-rouge">directives (điều hướng)</code> hoặc chạy một module nào đó.
Có vài điều hướng cơ bản:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">Rollback</code>: revert lại mọi thay đổi.</li>
  <li><code class="language-plaintext highlighter-rouge">Break</code>: dừng tại đó.</li>
  <li><code class="language-plaintext highlighter-rouge">Resume</code> một xử lý nào đó đang bị gián đoạn.</li>
  <li><code class="language-plaintext highlighter-rouge">Commit</code> một thay đổi hiện có.</li>
  <li><code class="language-plaintext highlighter-rouge">Ignore</code> luôn!</li>
</ul>

<p>Trong ví dụ hiện tại, tôi tạm thời cho <code class="language-plaintext highlighter-rouge">next</code> luôn, tức là dùng <code class="language-plaintext highlighter-rouge">Ignore</code> cho upload file.</p>

<p>Làm tương tự với các module khác, bạn có thể đảm bảo có xử lý lỗi trong từng trường hợp cụ thể.
Với module CSV convert thì tôi chọn <code class="language-plaintext highlighter-rouge">Break</code>.</p>

<p>Mô hình thực thi cuối cùng như sau:</p>

<p><img src="/assets/img/integromat20.png" alt="integromat" /></p>

<h3 id="filters">Filters</h3>

<p>Để thực hiện điều kiện filter những tin có liên quan tới <code class="language-plaintext highlighter-rouge">AI</code>, bạn có thể dùng chức năng filter của integromat như sau.
Click vào link giữa trigger và router:</p>

<p><img src="/assets/img/integromat21.png" alt="integromat" /></p>

<h2 id="test">Test</h2>

<p><img src="/assets/img/integromat22.png" style="width:30%; margin: 10px; float: right;" />
Testing là phần cần thiết trong phát triển phần mềm.
Các module đã được phát triển có SLA khá cao và unit testing cẩn thận nên ta sẽ skip UT lần này.
API testing cũng không cần vì các module đã được test cẩn thận và có SLA rồi.
Vậy ta cần test tích hợp (IT) thì sẽ có nút bấm <code class="language-plaintext highlighter-rouge">Run once</code>.
Tuy nhiên, bạn sẽ phải cần cấu hình Scenario như bên dưới:</p>

<p><img src="/assets/img/integromat23.png" style="width:50%; margin: 10px; float: left;" /></p>

<p>Sau đó thì bạn sẽ thực hiện testing nhiều lần, cứ có bugs thì lại fix cho đến khi thấy mỹ mãn thì chuyển tới mục tiếp theo để vận hành thôi.</p>

<h2 id="vận-hành">Vận hành</h2>

<p><img src="/assets/img/integromat24.png" style="width:30%; margin: 10px; float: right;" />
Trước khi triển khai vận hành, bạn phải cấu hình một chút về tần suất fetch news.
Như đã nói tần suất tầm 60 phút cũng ổn.</p>

<p>Sau đó bạn ấn vào cái Switch button để chuyển sang ON/OFF là xong.</p>

<h1 id="kết-luận">Kết luận</h1>

<p>Chúng ta đã điểm lại cách implement một dịch vụ fetch news và parse XML-to-CSV và post bài lên OneDrive cũng như Gitter.
Có áp dụng cả filter, router, …
Có đủ cả testing, vận hành, xử lý lỗi, … nên nhìn chung là một luồng ổn định để chiến lâu dài.</p>

<p>Nhìn chung cách làm nào cũng được, nhưng dùng nền tảng có SLA cao thì anh em yên tâm hơn về xử lý sự cố, xử lý lỗi, …
Khi có vấn đề gì thì cứ theo luồng mà chạy thôi nên độ tự tin nó cao.</p>

    



<div class="post-tags">
  
    
    <a href="/tags.html#programming">
    
      <span class="icon">
        <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z"/>
</svg>
      </span>&nbsp;<span class="tag-name">programming</span>
    </a>
  
    
    <a href="/tags.html#project-management">
    
      <span class="icon">
        <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z"/>
</svg>
      </span>&nbsp;<span class="tag-name">project management</span>
    </a>
  
    
    <a href="/tags.html#workflow-automation">
    
      <span class="icon">
        <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z"/>
</svg>
      </span>&nbsp;<span class="tag-name">workflow automation</span>
    </a>
  
    
    <a href="/tags.html#cicd">
    
      <span class="icon">
        <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z"/>
</svg>
      </span>&nbsp;<span class="tag-name">cicd</span>
    </a>
  
    
    <a href="/tags.html#notifications">
    
      <span class="icon">
        <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z"/>
</svg>
      </span>&nbsp;<span class="tag-name">notifications</span>
    </a>
  
</div>
  </div>

  
  <section class="comments">
    <h2>Comments</h2>
    
  <div id="disqus_thread">
    <button class="disqus-load" onClick="loadDisqusComments()">
      Load Comments
    </button>
  </div>
  <script>

  /**
  *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW
  *  TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
  *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT:s
  *  https://disqus.com/admin/universalcode/#configuration-variables
  */
  var disqus_config = function () {
    this.page.url = "https://wanted2.github.io/pm/non-english/2021/11/01/integromat.html";
    this.page.identifier = "" ||
                           "https://wanted2.github.io/pm/non-english/2021/11/01/integromat.html";
  }
  function loadDisqusComments() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = '//caineng.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  }
  </script>
  <noscript>
    Please enable JavaScript to view the
    <a href="https://disqus.com/?ref_noscript">comments powered by Disqus</a>.
  </noscript>



  </section>

  <section class="related">
  <h2>Related Posts</h2>
  <ul class="posts-list">
    
      <li>
        <h3>
          <a href="/non-english/se/pm/2021/11/27/fullstask-engineer-and-lean-startup.html">
            Why lean startups love fullstack engineers?
            <small>27 Nov 2021</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/non-english/se/pm/ai/2021/11/20/chicken-and-egg-problem.html">
            Quả trứng và con gà: cái nào có trước? - Bất bình đẳng về lương và sản lượng lao động
            <small>20 Nov 2021</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/sre/se/ai/2021/11/13/opensearch-kibana-tuts-1.html">
            A Tutorial on Amazon OpenSearch Service and Kibana
            <small>13 Nov 2021</small>
          </a>
        </h3>
      </li>
    
  </ul>
</section>

</div>

    </main>

    <!-- Optional footer content -->

    <script src="https://kit.fontawesome.com/d0b91d895e.js" crossorigin="anonymous"></script>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [['$','$'], ['\\(','\\)']],
          processEscapes: true
        }
      });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
  </body>
</html>
